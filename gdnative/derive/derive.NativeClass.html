<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Makes it possible to use a type as a NativeScript."><meta name="keywords" content="rust, rustlang, rust-lang, NativeClass"><title>NativeClass in gdnative::derive - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc derive"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../gdnative/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><h2 class="location">Other items in<br><a href="../index.html">gdnative</a>::<wbr><a href="index.html">derive</a></h2><div id="sidebar-vars" data-name="NativeClass" data-ty="derive" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Derive Macro <a href="../index.html">gdnative</a>::<wbr><a href="index.html">derive</a>::<wbr><a class="derive" href="#">NativeClass</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></span></h1><pre class="rust derive"><code>#[derive(NativeClass)]
{
    // Attributes available to this derive:
    #[inherit]
    #[export]
    #[opt]
    #[user_data]
    #[property]
    #[register_with]
    #[no_constructor]
}
</code></pre><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Makes it possible to use a type as a NativeScript.</p>
<h2 id="type-attributes" class="section-header"><a href="#type-attributes">Type attributes</a></h2>
<p>The behavior of the derive macro can be customized using attributes on the type
deriving <code>NativeClass</code>. All type attributes are optional.</p>
<h3 id="inheritgdnativeapibaseclass" class="section-header"><a href="#inheritgdnativeapibaseclass"><code>#[inherit(gdnative::api::BaseClass)]</code></a></h3>
<p>Sets <code>gdnative::api::BaseClass</code> as the base class for the script. This <em>must</em> be
a type from the generated Godot API (that implements <code>GodotObject</code>). All <code>owner</code>
arguments of exported methods must be references (<code>TRef</code>, <code>Ref</code>, or <code>&amp;</code>) to this
type.</p>
<p>Inheritance from other scripts, either in Rust or other languages, is
not supported.</p>
<p>If no <code>#[inherit(...)]</code> is provided, <a href="../gdnative/api/struct.Reference.html"><code>gdnative::api::Reference</code></a>
is used as a base class. This behavior is consistent with GDScript: omitting the
<code>extends</code> keyword will inherit <code>Reference</code>.</p>
<h3 id="user_datagdnativeuser_datasomewrapperself" class="section-header"><a href="#user_datagdnativeuser_datasomewrapperself"><code>#[user_data(gdnative::user_data::SomeWrapper&lt;Self&gt;)]</code></a></h3>
<p>Use the given type as the user-data wrapper. See the module-level docs on
<code>gdnative::user_data</code> for more information.</p>
<h3 id="register_withpathtofunction" class="section-header"><a href="#register_withpathtofunction"><code>#[register_with(path::to::function)]</code></a></h3>
<p>Use a custom function to register signals, properties or methods, in addition
to the one generated by <code>#[methods]</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">gdnative::prelude</span>::<span class="kw-2">*</span>;
<span class="kw">use</span> <span class="ident">gdnative::nativescript::export::property</span>::{<span class="ident">RangeHint</span>, <span class="ident">FloatHint</span>};

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">NativeClass</span>)]</span>
<span class="attribute">#[<span class="ident">inherit</span>(<span class="ident">Reference</span>)]</span>
<span class="attribute">#[<span class="ident">register_with</span>(<span class="ident"><span class="self">Self</span>::my_register_function</span>)]</span>
<span class="kw">struct</span> <span class="ident">Foo</span>;

<span class="attribute">#[<span class="ident">methods</span>]</span>
<span class="kw">impl</span> <span class="ident">Foo</span> {
    <span class="kw">fn</span> <span class="ident">new</span>(<span class="kw">_</span>: <span class="kw-2">&amp;</span><span class="ident">Reference</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="self">Self</span> {
        <span class="self">Self</span> {}
    }
    <span class="kw">fn</span> <span class="ident">my_register_function</span>(<span class="ident">builder</span>: <span class="kw-2">&amp;</span><span class="ident">ClassBuilder</span><span class="op">&lt;</span><span class="ident">Foo</span><span class="op">&gt;</span>) {
        <span class="ident">builder</span>.<span class="ident">add_signal</span>(<span class="ident">Signal</span> { <span class="ident">name</span>: <span class="string">&quot;foo&quot;</span>, <span class="ident">args</span>: <span class="kw-2">&amp;</span>[] });
        <span class="ident">builder</span>.<span class="ident">add_property</span>::<span class="op">&lt;</span><span class="ident">f32</span><span class="op">&gt;</span>(<span class="string">&quot;bar&quot;</span>)
            .<span class="ident">with_getter</span>(<span class="op">|</span><span class="kw">_</span>, <span class="kw">_</span><span class="op">|</span> <span class="number">42.0</span>)
            .<span class="ident">with_hint</span>(<span class="ident">FloatHint::Range</span>(<span class="ident">RangeHint::new</span>(<span class="number">0.0</span>, <span class="number">100.0</span>)))
            .<span class="ident">done</span>();
    }
}</code></pre></div>
<h3 id="no_constructor" class="section-header"><a href="#no_constructor"><code>#[no_constructor]</code></a></h3>
<p>Indicates that this type has no zero-argument constructor. Instances of such
scripts can only be created from Rust using <code>Instance::emplace</code>. <code>Instance::new</code>
or <code>ScriptName.new</code> from GDScript will result in panics at runtime.</p>
<p>See documentation on <code>Instance::emplace</code> for an example on how this can be used.</p>
<h2 id="field-attributes" class="section-header"><a href="#field-attributes">Field attributes</a></h2>
<p>All field attributes are optional.</p>
<h3 id="property" class="section-header"><a href="#property"><code>#[property]</code></a></h3>
<p>Convenience attribute to register a field as a property. Possible arguments for
the attribute are:</p>
<ul>
<li><code>path = &quot;my_category/my_property_name&quot;</code></li>
</ul>
<p>Puts the property under the <code>my_category</code> category and renames it to
<code>my_property_name</code> in the inspector and for GDScript.</p>
<ul>
<li><code>default = 42.0</code></li>
</ul>
<p>Sets the default value <em>in the inspector</em> for this property. The setter is <em>not</em>
guaranteed to be called by the engine with the value.</p>
<ul>
<li><code>before_get</code> / <code>after_get</code> / <code>before_set</code> / <code>after_set</code> <code>= &quot;Self::hook_method&quot;</code></li>
</ul>
<p>Call hook methods with <code>self</code> and <code>owner</code> before and/or after the generated property
accessors.</p>
<ul>
<li><code>no_editor</code></li>
</ul>
<p>Hides the property from the editor. Does not prevent it from being sent over network or saved in storage.</p>
<h3 id="methods" class="section-header"><a href="#methods"><code>#[methods]</code></a></h3>
<p>Adds the necessary information to a an <code>impl</code> block to register the properties and methods with Godot.</p>
<p><strong>Important</strong>: This needs to be added to one and only one <code>impl</code> block for a given <code>NativeClass</code>.</p>
<p>For additional details about how <code>#[methods]</code> expands, please refer to <a href="attr.methods.html">gdnative::methods</a></p>
<h3 id="export" class="section-header"><a href="#export"><code>#[export]</code></a></h3>
<p>Registers the attributed function signature to be used by Godot.
A valid function signature must have:</p>
<ul>
<li><code>&amp;self</code> or <code>&amp;mut self</code> as its first parameter</li>
<li><code>&amp;T</code> or <code>TRef&lt;T&gt;</code> where T refers to the type declared in <code>#[inherit(T)]</code> attribute as it’s second parameter; this is typically called the <code>owner</code>.</li>
<li>Optionally, any number of additional parameters, which must have the type <code>Variant</code> or must implement the <code>FromVariant</code> trait. <code>FromVariant</code> is implemented for most common types.</li>
<li>Return values must implement the <code>OwnedToVariant</code> trait (automatically implemented by <code>ToVariant</code>)
or be a <code>Variant</code> type.</li>
</ul>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="attribute">#[<span class="ident">export</span>]</span>
<span class="kw">fn</span> <span class="ident">foo</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Reference</span>);</code></pre></div>
<p><strong>Note</strong>: Marking a function with <code>#[export]</code> does not have any effect unless inside an <code>impl</code> block that has the <code>#[methods]</code> attribute.</p>
<p>Possible arguments for this attribute are</p>
<ul>
<li><code>name</code> = “overridden_function_name”</li>
</ul>
<p>Overrides the function name as the method name to be registered in Godot.</p>
<ul>
<li><code>rpc</code> = “selected_rpc”
<ul>
<li>“selected_rpc” must be one of the following values, which refer to the associated <a href="https://docs.godotengine.org/en/stable/classes/class_multiplayerapi.html?highlight=RPC#enumerations">Multiplayer API RPC Mode</a>
<ul>
<li>“disabled” - <code>RPCMode::RPC_MODE_DISABLED</code></li>
<li>“remote” - <code>RPCMode::RPC_MODE_REMOTE</code></li>
<li>“remote_sync” - <code>RPCMode::RPC_MODE_REMOTE_SYMC</code></li>
<li>“master” - <code>RPCMode::RPC_MODE_MASTER</code></li>
<li>“puppet” - <code>RPCMode::RPC_MODE_PUPPET</code></li>
<li>“master_sync” - <code>RPCMode::RPC_MODE_MASTERSYNC</code></li>
<li>“puppet_sync” - <code>RPCMode::RPC_MODE_PUPPETSYNC</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>This enables you to set the <a href="https://docs.godotengine.org/en/stable/classes/class_multiplayerapi.html?highlight=RPC#enumerations">Multiplayer API RPC Mode</a> for the function.</p>
<p>Refer to <a href="https://docs.godotengine.org/en/stable/tutorials/networking/high_level_multiplayer.html#rpc">Godot’s Remote Procedure documentation</a> for more details.</p>
<h4 id="node-virtual-functions" class="section-header"><a href="#node-virtual-functions"><code>Node</code> virtual functions</a></h4>
<p>This is a list of common Godot virtual functions that are automatically called via <a href="https://docs.godotengine.org/en/stable/classes/class_object.html#class-object-method-notification">notifications</a>.</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_ready</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Node</span>);</code></pre></div>
<p>Called when both the node and its children have entered the scene tree.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-method-ready">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_enter_tree</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Node</span>);</code></pre></div>
<p>Called when the node enters the scene tree.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-method-enter-tree">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_exit_tree</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Node</span>);</code></pre></div>
<p>Called when the node is removed from the scene tree.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-method-exit-tree">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_get_configuration_warning</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Node</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">GodotString</span>;</code></pre></div>
<p>The string returned from this method is displayed as a warning in the Scene Dock if the script that overrides it is a tool script.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-method-get-configuration-warning">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_process</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Node</span>, <span class="ident">delta</span>: <span class="ident">f64</span>);</code></pre></div>
<p>Called during processing step of the main loop.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-method-process">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_physics_process</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Node</span>, <span class="ident">delta</span>: <span class="ident">f64</span>);</code></pre></div>
<p>Called during physics update, with a fixed timestamp.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-method-physics-process">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_input</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Node</span>, <span class="ident">event</span>: <span class="ident">Ref</span><span class="op">&lt;</span><span class="ident">InputEvent</span><span class="op">&gt;</span>);</code></pre></div>
<p>Called when there is an input event.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-method-input">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_unhandled_input</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Node</span>, <span class="ident">event</span>: <span class="ident">Ref</span><span class="op">&lt;</span><span class="ident">InputEvent</span><span class="op">&gt;</span>);</code></pre></div>
<p>Called when an <code>InputEvent</code> hasn’t been consumed by <code>_input()</code> or any GUI.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-method-unhandled-input">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_unhandled_key_input</span> (<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Node</span>, <span class="ident">event</span>: <span class="ident">Ref</span><span class="op">&lt;</span><span class="ident">InputKeyEvent</span><span class="op">&gt;</span>);</code></pre></div>
<p>Called when an <code>InputEventKey</code> hasn’t been consumed by <code>_input()</code> or any GUI.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-method-unhandled-key-input">Godot docs</a> for more information.</em>
<br><br></p>
<h4 id="control-virtual-functions" class="section-header"><a href="#control-virtual-functions"><code>Control</code> virtual functions</a></h4>
<p>This is a list of common Godot virtual functions that are automatically called via <a href="https://docs.godotengine.org/en/stable/classes/class_object.html#class-object-method-notification">notifications</a>.</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_clips_input</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Control</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">bool</span>;</code></pre></div>
<p>Returns whether <code>_gui_input()</code> should not be called for children controls outside this control’s rectangle.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_control.html#class-control-method-clips-input">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_get_minimum_size</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Control</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Vector2</span>;</code></pre></div>
<p>Returns the minimum size for this control.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_control.html#class-control-method-get-minimum-size">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_gui_input</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Control</span>, <span class="ident">event</span>: <span class="ident">Ref</span><span class="op">&lt;</span><span class="ident">InputEvent</span><span class="op">&gt;</span>);</code></pre></div>
<p>Use this method to process and accept inputs on UI elements.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_control.html#class-control-method-gui-input">Godot docs</a> for more information.</em>
<br><br></p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">fn</span> <span class="ident">_make_custom_tooltip</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">owner</span>: <span class="kw-2">&amp;</span><span class="ident">Control</span>, <span class="ident">for_text</span>: <span class="ident">String</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Ref</span><span class="op">&lt;</span><span class="ident">Control</span><span class="op">&gt;</span>;</code></pre></div>
<p>Returns a <code>Control</code> node that should be used as a tooltip instead of the default one.<br />
<em>See <a href="https://docs.godotengine.org/en/stable/classes/class_control.html#class-control-method-make-custom-tooltip">Godot docs</a> for more information.</em>
<br><br></p>
</div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="gdnative" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>